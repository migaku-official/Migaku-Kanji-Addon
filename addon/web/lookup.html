<!-- ======================
START - Migaku markup
- @version v0.18.1
======================= -->

<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<div id="welcome">
	<div class="KanjiLookup-container KanjiLookup-container--noResult">
		<h1 class="welcome">WELCOME!</h1>
		<p class="welcome-text">
			To look up Kanji, enter them into the box above and press Enter or press
			the search button.
		</p>
		<p class="welcome-text">
			You can also press <span class="key-sequence"></span> anywhere in Anki to
			search for the highlighted characters.
		</p>
		<p class="welcome-text">
			In the upper right search box you can search kanjis and primitives by using keywords, meanings, readings and radicals.
			You can use either a kanji character or its English translation. Also partial search terms can be given.
		</p>
		<p class="welcome-text">
			Example: to search for kanjis that contain <i>'flowers','water' and 'mouth'</i> you can enter: <b>flow,wat,mout</b>
		</p>
		<p class="welcome-text">
			Also Heisig stories and comments as well as Koohi stories will be searched. Try for example: <b>tarzan,tree</b>
		</p>
	</div>
</div>

<div id="noresult" style="display: none">
	<div class="KanjiLookup-container KanjiLookup-container--noResult">
		<h1>No result found for character</h1>
		<h1 class="kanji">ä»®</h1>
	</div>
</div>

<div id="result" style="display: none">
	<!-- START - Migaku header -->
	<div class="migaku-header">
		<img class="migaku-header__logo" src="_migaku-logo.svg" alt="Logo" />
	</div>
	<!-- END - Migaku header -->

	<div class="layout__container">
		<div class="layout__above"></div>

		<main class="layout__main">
			<div class="layout__content">
				<!-- START - Font examples -->
				<div class="font-examples__container">
					<h2 class="vh">Font examples</h2>
					<ul class="font-examples__list">
						<li class="fontExample font-1 font-examples__character" id="character_img_1"></li>
						<li class="fontExample font-2 font-examples__character" id="character_img_2"></li>
						<li class="fontExample font-3 font-examples__character" id="character_img_3"></li>
						<li class="fontExample font-4 font-examples__character" id="character_img_4"></li>
					</ul>
				</div>
				<!-- END - Font examples -->

				<!-- START - Keyword and meaning -->
				<div class="keyword-and-meaning__container">
					<h2 id="keywords" class="keyword-and-meaning__keyword"></h2>

					<div class="meanings__container">
						<h3 class="meanings__title">Meanings:</h3>
						<span id="meanings"></span>
					</div>
				</div>
				<!-- END - Keyword and meaning -->

				<!-- START - User data -->
				<div class="userData userData__container">
					<hr class="separator -full" />
				</div>
				<!-- END - User data -->

				<!-- START - Linked words and radicals -->
				<!--#include file="div_words_and_radicals.html" -->
				<!-- END - Linked words and radicals -->

				<!-- START - Actions lookup -->
				<div class="actions-lookup__container">
					<div class="title-tooltip__container">
						<h2 class="title-tooltip__title actions-lookup__title">
							Cards
							<button
								type="button"
								title="What's this?"
								aria-controls="tooltip-id--actions_lookup__title"
								onclick="toggleShow('tooltip-id--actions_lookup__title')"
							>
								<img src="_kanji_icon_help_black.svg" alt="" />
							</button>
						</h2>

						<div
							id="tooltip-id--actions_lookup__title"
							class="title-tooltip__text"
							style="display: none"
							aria-expanded="false"
						>
							Manage the two types of potential flashcards associated with this
							kanji: "Recognition" (reading comprehension), and "Production"
							(writing practice).
						</div>

						<hr class="separator" />
					</div>

					<div class="actions-lookup__buttons">
						<button
							onclick="recognition_card_click(event);"
							id="recognition_card_btn"
							class="button -wide"
							title="null"
						>
							Show Recognition Card
						</button>
						<button
							onclick="production_card_click(event);"
							id="production_card_btn"
							class="button -wide"
							title="Shift click to mark as known"
						>
							Create Production Card
						</button>
					</div>
					<div class="mobile-only-info-msg">
						Actions only work on desktop.
						<br />
						You are able to mark a kanji as known, and create or show the
						associated recognition and production cards.
					</div>
				</div>
				<!-- END - Actions lookup -->
			</div>

			<aside class="layout__aside">
				<!-- START - Stroke order diagram -->
				<!--#include file="div_stroke_order.html" -->
				<!-- END - Stroke order diagram -->
				<!-- START - Tags -->
				<div class="tags tags__container kanji-char-font">
					<h2 class="vh">Tags</h2>
				</div>
				<!-- END - Tags -->

				<!-- START - Readings -->
				<!--#include file="div_readings.html" -->
				<!-- END - Readings -->
			</aside>
		</main>

		<div class="layout__below">
			<!-- START - Stories -->
			<!--#include file="div_stories.html" -->
			<!-- END - Stories -->

			<!-- START - Actions -->
			<div class="actions-back__container">
				<div class="title-tooltip__container">
					<h2 class="title-tooltip__title actions-back__title">
						Actions
						<button
							type="button"
							title="What's this?"
							aria-controls="tooltip-id--actions-back__title"
							onclick="toggleShow('tooltip-id--actions-back__title')"
						>
							<img src="_kanji_icon_help_black.svg" alt="" />
						</button>
					</h2>

					<div
						id="tooltip-id--actions-back__title"
						class="title-tooltip__text"
						style="display: none"
						aria-expanded="false"
					>
						Perform actions such as keyword customisations or marking this kanji
						as known. You can also suggest a change if there are any mistakes or
						missing data.
					</div>

					<hr class="separator" />
				</div>

				<div class="actions-back__buttons">
					<div class="actions-back__primary">
						<button onclick="set_custom_keyword();" class="button -wide">
							Set Custom Keyword
						</button>
						<button onclick="set_custom_story();" class="button -wide">
							Set Custom Story
						</button>
					</div>
					<div class="actions-back__secondary">
						<button
							onclick="pycmd('suggest_change-' + data.character)"
							class="button -secondary -wide"
						>
							Suggest Change
						</button>
					</div>
				</div>
				<div class="mobile-only-info-msg">
					Actions only work on desktop.
					<br />
					You are able to set a custom keyword, custom story, and
					mark-known/delete existing kanji cards.
				</div>
			</div>
			<!-- END - Actions -->
		</div>

		<!-- START - Migaku data -->
		<div id="migaku_data">{{MigakuData}}</div>
		<!-- START - Migaku end -->
	</div>
</div>

<!-- START - Addon script, Lookup -->
<script>

let last_character = null;

function set_data(data_b64_json) {

    var data_json = atob(data_b64_json);
    data = JSON.parse(data_json);

    // Scroll up if new character was opened
    var new_character =
        data !== null && data.has_result ? data.character : null;
    if (last_character === null || new_character != last_character)
        window.scrollTo(0, 0);
    last_character = new_character;

    // Suspend existing dmak instance
    if (dmak !== null) {
        dmak.cancel_prepare = true;
        delete dmak;
    }

    $('#welcome').toggle(data === null);
    $('#noresult').toggle(data !== null && !data.has_result);
    $('#result').toggle(data !== null && data.has_result);

    if (data !== null && !data.has_result) $('.kanji').html(data.character);
    else if (data !== null && data.has_result) {
        $('#strokeorder').html('');

        // Hide any open tooltips
        toggleShowAll(false);

        render_page("lookup");
    }
}

</script>
<!-- END - Addon script, Lookup -->

<!-- ======================
END - Migaku markup
======================= -->
